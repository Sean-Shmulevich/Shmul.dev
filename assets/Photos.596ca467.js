import{S as SvelteComponent,i as init,s as safe_not_equal,a as add_render_callback,e as element,b as space,f as attr,d as set_style,N as src_url_equal,t as toggle_class,g as insert,h as append,P as add_resize_listener,l as listen,p as prevent_default,O as is_function,j as action_destroyer,k as asDraggable,L as noop,r as detach,v as run_all,w as component_subscribe,y as writableArray,x as count,A as onMount,C as glowWindow,H as onDestroy,z as createEventDispatcher,I as globals,K as binding_callbacks}from"./index.cd76d802.js";const Photos_svelte_svelte_type_style_lang="",{window:window_1}=globals;function create_fragment(ctx){let div7,div2,div0,t1,div1,button0,t2,button1,t3,button2,div2_resize_listener,t4,div6,div5,div3,img,img_src_value,img_alt_value,t5,fieldset,div7_id_value,div7_class_value,mounted,dispose;return add_render_callback(ctx[21]),{c(){div7=element("div"),div2=element("div"),div0=element("div"),div0.innerHTML='<span class="filesBarText svelte-ll0emv">File Explorer</span>',t1=space(),div1=element("div"),button0=element("button"),t2=space(),button1=element("button"),t3=space(),button2=element("button"),t4=space(),div6=element("div"),div5=element("div"),div3=element("div"),img=element("img"),t5=space(),fieldset=element("fieldset"),fieldset.innerHTML='<div class="status-bar svelte-ll0emv"></div>',attr(div0,"class","title-bar-text svelte-ll0emv"),set_style(div0,"text-align","right"),set_style(div0,"float","left"),set_style(div0,"font-size","10px"),set_style(div0,"margin-left","10px"),set_style(div0,"margin-top","4px"),attr(button0,"class","minimize"),set_style(button0,"min-width","15px"),attr(button0,"aria-label","Minimize"),attr(button1,"class","full"),set_style(button1,"min-width","15px"),set_style(button1,"margin-left","2px"),attr(button1,"aria-label","Maximize"),attr(button2,"class","close"),set_style(button2,"min-width","15px"),attr(button2,"aria-label","Close"),attr(div1,"class","title-bar-controls svelte-ll0emv"),set_style(div1,"position","relative"),set_style(div1,"float","right"),set_style(div1,"margin-right","5px"),set_style(div1,"padding-top","5px"),attr(div2,"class","title-bar fileGridBar windowBar  svelte-ll0emv"),set_style(div2,"width","calc(100% - 2px)"),add_render_callback(()=>ctx[22].call(div2)),src_url_equal(img.src,img_src_value=eval(`image${ctx[14]}`))||attr(img,"src",img_src_value),attr(img,"alt",img_alt_value=`Image ${ctx[14]}`),set_style(img,"max-width","100%"),attr(div3,"class","window-body svelte-ll0emv"),attr(fieldset,"class","fileMenuBottom"),set_style(fieldset,"transform","translateY(-2px)"),attr(div5,"class","window myWindow svelte-ll0emv"),set_style(div5,"width","calc(100% - 14px)"),set_style(div5,"background","white"),set_style(div5,"margin-left","0px"),set_style(div5,"border","4px solid #c0c0c0",1),set_style(div5,"box-shadow","inset -1px -1px #000000, inset 1px 1px #0a0a0a, inset -2px -2px #808080, inset 2px 2px #dfdfdf"),set_style(div6,"border","1px solid #000000"),set_style(div6,"display","inline-block"),set_style(div6,"width","inherit"),set_style(div6,"margin-top","-6px"),attr(div6,"class","svelte-ll0emv"),attr(div7,"id",div7_id_value="fileSysWindow"+ctx[4]),attr(div7,"class",div7_class_value="remBoxMobile File-System"+ctx[4]+" svelte-ll0emv"),set_style(div7,"position","fixed"),set_style(div7,"left",ctx[1]+"px"),set_style(div7,"top",ctx[2]+"px"),set_style(div7,"z-index",ctx[0]),set_style(div7,"--menuX",ctx[6]+"px"),set_style(div7,"--menuY",ctx[7]+"px"),set_style(div7,"width",ctx[5]+"px"),set_style(div7,"cursor","unset",1),toggle_class(div7,"classname",ctx[3])},m(i,n){insert(i,div7,n),append(div7,div2),append(div2,div0),append(div2,t1),append(div2,div1),append(div1,button0),append(div1,t2),append(div1,button1),append(div1,t3),append(div1,button2),div2_resize_listener=add_resize_listener(div2,ctx[22].bind(div2)),append(div7,t4),append(div7,div6),append(div6,div5),append(div5,div3),append(div3,img),append(div5,t5),append(div5,fieldset),ctx[24](div7),mounted||(dispose=[listen(window_1,"resize",ctx[21]),listen(button0,"mousedown",prevent_default(function(){is_function(ctx[9])&&ctx[9].apply(this,arguments)}),!0),listen(button0,"touchstart",prevent_default(function(){is_function(ctx[9])&&ctx[9].apply(this,arguments)}),!0),listen(button2,"mousedown",prevent_default(ctx[16]),!0),listen(button2,"touchstart",prevent_default(ctx[16]),!0),action_destroyer(asDraggable.call(null,div2,{relativeTo:document.body,onDragStart:ctx[17],onDragMove:ctx[18],onDragEnd:ctx[19],minX:0,minY:26,maxX:window.innerWidth-20,maxY:window.innerHeight-70})),listen(div3,"click",ctx[20]),listen(div7,"mousedown",ctx[23])],mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,dirty[0]&16384&&!src_url_equal(img.src,img_src_value=eval(`image${ctx[14]}`))&&attr(img,"src",img_src_value),dirty[0]&16384&&img_alt_value!==(img_alt_value=`Image ${ctx[14]}`)&&attr(img,"alt",img_alt_value),dirty[0]&16&&div7_id_value!==(div7_id_value="fileSysWindow"+ctx[4])&&attr(div7,"id",div7_id_value),dirty[0]&16&&div7_class_value!==(div7_class_value="remBoxMobile File-System"+ctx[4]+" svelte-ll0emv")&&attr(div7,"class",div7_class_value),dirty[0]&2&&set_style(div7,"left",ctx[1]+"px"),dirty[0]&4&&set_style(div7,"top",ctx[2]+"px"),dirty[0]&1&&set_style(div7,"z-index",ctx[0]),dirty[0]&64&&set_style(div7,"--menuX",ctx[6]+"px"),dirty[0]&128&&set_style(div7,"--menuY",ctx[7]+"px"),dirty[0]&32&&set_style(div7,"width",ctx[5]+"px"),dirty[0]&24&&toggle_class(div7,"classname",ctx[3])},i:noop,o:noop,d(i){i&&detach(div7),div2_resize_listener(),ctx[24](null),mounted=!1,run_all(dispose)}}}function incrementCount(i,n,e,r){return i>n.zIdx||(i==n.zIdx?i+=2:i=n.zIdx+1),e.set({zIdx:i,name:r}),i}let fileWinOffset=0;var tapedTwice=!1;function tapHandler(i,n){if(!tapedTwice)return tapedTwice=!0,setTimeout(function(){tapedTwice=!1},300),!1;i.preventDefault(),n()}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}let touchDevice=isTouchDevice(),touchstartX=0,touchendX=200;function swipeStart(i){touchstartX=i.changedTouches[0].screenY}function swipeEnd(i,n){touchendX=i.changedTouches[0].screenY,Math.abs(touchstartX-touchendX)>100&&touchendX>touchstartX&&n()}function handleMinimize(i,n,e,r,m,c){let l=i.indexOf(r);if(n.set(r),l===-1)return[!1,0,0];let d=document.querySelector(m).getBoundingClientRect(),p=d.left+d.width/3,o=document.querySelector(c),a=getComputedStyle(o),_=parseInt(a.left),f=parseInt(a.bottom),s=parseInt(a.height),w=parseInt(a.width),y=p-(_+w/2)-20,u=f+s;return o.addEventListener("animationend",()=>n.reset(),!1),[!0,y,u]}const totalImages=7;function instance(i,n,e){let r,m;component_subscribe(i,writableArray,t=>e(27,r=t)),component_subscribe(i,count,t=>e(15,m=t));let{zIdx:c=0}=n,{BoxX:l=120,BoxY:d=120}=n,p=414,{hide:o=!1}=n,a,_,f,{windowIndex:s=0}=n,w,y,u,S=0,B=0,g,b;onMount(()=>{fileWinOffset+=25,e(1,l=window.innerWidth/4),window.innerWidth<660&&e(1,l=50),window.innerWidth<465&&e(1,l=-23),window.innerWidth<=414&&e(5,p=window.innerWidth-20),e(1,l+=fileWinOffset),e(2,d+=fileWinOffset);let t="#minButtFileSystem",v="File System";s!==0&&(t+=s,v+=s),e(9,u=()=>{e(3,[o,a,_]=handleMinimize(r,glowWindow,o,v,t,`#fileSysWindow${s}`),o,e(6,a),e(7,_))}),touchDevice&&(document.querySelector(`.remBoxMobile.File-System${s} * div.window`).addEventListener("touchstart",swipeStart),document.querySelector(`.remBoxMobile.File-System${s} * div.window`).addEventListener("touchend",y=x=>{swipeEnd(x,u)}),document.querySelector(`.remBoxMobile.File-System${s} > .fileGridBar`).addEventListener("touchstart",w=x=>{tapHandler(x,u)}))});//!bug if you remove one in a stack (not the top one) the newest one will be on top of one that is on top of the stack directly overrlapping it.
onDestroy(()=>{fileWinOffset-=25,touchDevice&&(document.querySelector(`.remBoxMobile.File-System${s} * div.window`).removeEventListener("touchstart",swipeStart),document.querySelector(`.remBoxMobile.File-System${s} * div.window`).removeEventListener("touchend",y),document.querySelector(`.remBoxMobile.File-System${s} > .fileGridBar`).removeEventListener("touchstart",w))});const M=createEventDispatcher();function z(t){M("close",t.detail)}function D(){return{x:l,y:d}}function W(t,v,x,F){e(1,l=t),e(2,d=v)}function X(t,v,x,F){e(1,l=t),e(2,d=v)}let h=1;function I(){h===totalImages?e(14,h=1):e(14,h+=1)}function T(){e(10,S=window_1.innerWidth),e(11,B=window_1.innerHeight)}function E(){g=this.clientWidth,b=this.clientHeight,e(12,g),e(13,b)}const Y=()=>{o?e(0,c):e(0,c=incrementCount(c,m,count,"File System"))};function q(t){binding_callbacks[t?"unshift":"push"](()=>{f=t,e(8,f)})}return i.$$set=t=>{"zIdx"in t&&e(0,c=t.zIdx),"BoxX"in t&&e(1,l=t.BoxX),"BoxY"in t&&e(2,d=t.BoxY),"hide"in t&&e(3,o=t.hide),"windowIndex"in t&&e(4,s=t.windowIndex)},[c,l,d,o,s,p,a,_,f,u,S,B,g,b,h,m,z,D,W,X,I,T,E,Y,q]}class Photos extends SvelteComponent{constructor(n){super(),init(this,n,instance,create_fragment,safe_not_equal,{zIdx:0,BoxX:1,BoxY:2,hide:3,windowIndex:4},null,[-1,-1])}}export{Photos as default,fileWinOffset,handleMinimize,incrementCount,swipeEnd,swipeStart,tapHandler,touchDevice};
